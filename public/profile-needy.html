<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">


    <script src="js/jquery-1.8.2.min.js"></script>

    <script>
        function loadidFile(ref) {
          var image = document.getElementById('idprev');
          image.src = URL.createObjectURL(ref.files[0]);
        };

        function loadimgFile(ref) {
          var image = document.getElementById('imgprev');
          image.src = URL.createObjectURL(ref.files[0]);
        };

       
    </script>

    <script>
         $(document).ready(function(){
            $("#btnsearch").click(function(){
                var mail=$("#txtNeedyEmail").val();
                var url="/needy-search-fill?txtNeedyEmail="+ mail;
                $.getJSON(url,function(jsonobject){
                    if(jsonobject.length==0)
                    {
                        alert("SORRY!! There is no such Email :( ");
                    }
                    else
                    {
                        $("#txtNeedyFname").val(jsonobject[0].name);
                        $("#txtNeedyLname").val(jsonobject[0].lname);
                        $("#txtNeedyMobileNumber").val(jsonobject[0].mobile);
                        $("#txtNeedyAddress").val(jsonobject[0].address);
                        $("#txtNeedyCity").val(jsonobject[0].city);
                        $("#txtNeedyState").val(jsonobject[0].state);
                        $("#txtNeedyCityZip").val(jsonobject[0].zip);
                        $("#txtNeedySelectId").val(jsonobject[0].prooftype);
                        $("#txtNeedyContactTime").val(jsonobject[0].timings);
                        
                        $("#idprev").prop("src","uploads/"+jsonobject[0].proofpic);
                        $("#imgprev").prop("src","uploads/"+jsonobject[0].profilepic);


                        $("#hdn1").val(jsonobject[0].proofpic);
                        $("#hdn2").val(jsonobject[0].profilepic);

                    }
                })
            })
        })
    </script>

</head>

<body>
    <nav class="navbar bg-primary fixed-top">
        <div class="container-fluid justify-content-center">
            <span class="navbar-brand mb-0 h1" style="font-size: 30px; color: white;">Needy Profile</span>
        </div>
    </nav>

    <div class="container">
        <form class="row g-4 mt-5 justify-content-center" method="post" enctype="multipart/form-data" >
            <input type="hidden" id="hdn1" name="hdn1">
            <input type="hidden" id="hdn2" name="hdn2">
            <div class="col-md-10">
                <div class="col-md-12">
                    <label for="txtNeedyEmail" class="form-label">Email Id</label>
                    <div class="col-md-12 d-flex gap-3">
                        <input type="text" class="form-control"  id="txtNeedyEmail" name="txtNeedyEmail"
                            required>
                        <button class="btn btn-primary" type="button" id="btnsearch" name="btnsearch">Search</button>
                    </div>

                </div>
            </div>

            <div class="col-md-5">
                <label for="txtNeedyFname"  class="form-label">First name</label>
                <input type="text" class="form-control" id="txtNeedyFname" name="txtNeedyFname" value="Mark" required>
                <div class="valid-tooltip">
                    Looks good!
                </div>
            </div>
            <div class="col-md-5">
                <label for="txtNeedyLname" class="form-label">Last name</label>
                <input type="text" class="form-control" id="txtNeedyLname" name="txtNeedyLname" value="Otto" required>
                <div class="valid-tooltip">
                    Looks good!
                </div>
            </div>


            <div class="col-md-10">
                <label for="txtNeedyAddress" class="form-label">Address</label>
                <input type="text" class="form-control" id="txtNeedyAddress" name="txtNeedyAddress" value="address" required>
                
            </div>


            <div class="col-md-4">
                <label for="txtNeedyCity" class="form-label">City</label>
                <input type="text" class="form-control" value="city" id="txtNeedyCity" name="txtNeedyCity" required>
                <div class="invalid-tooltip">
                    Please provide a valid city.
                </div>
            </div>
            <div class="col-md-3 position-relative">
                <label for="txtNeedyState" class="form-label">State</label>
                <select class="form-select" id="txtNeedyState" name="txtNeedyState" required>
                    <option disabled value="">Choose...</option>
                    <option selected>...</option>
                    <option value="punjab">Punjab</option>
                    <option value="haryana">Haryana</option>
                </select>
                <div class="invalid-tooltip">
                    Please select a valid state.
                </div>
            </div>
            <div class="col-md-3 position-relative">
                <label for="txtNeedyCityZip" class="form-label">Zip</label>
                <input type="text" class="form-control" value="1212" id="txtNeedyCityZip" name="txtNeedyCityZip" required>
                <div class="invalid-tooltip">
                    Please provide a valid zip.
                </div>
            </div>

            <div class="col-md-4 position-relative">
                <label for="txtNeedySelectId" class="form-label">Select Id</label>
                <select class="form-select" id="txtNeedySelectId" name="txtNeedySelectId" required>
                    <option selected disabled value="">Choose...</option>
                    <option selected>...</option>
                    <option value="punjab">Punjab</option>
                    <option value="haryana">Haryana</option>
                    <option value="bihar">Bihar</option>
                    <option value="uttar pradesh">Uttar Pradesh</option>
                    <option value="punjab">Punjab</option>
                    <option value="punjab">Punjab</option>
                    <option value="punjab">Punjab</option>
                    <option value="punjab">Punjab</option>
                </select>
                <div class="invalid-tooltip">
                    Please select a valid state.
                </div>
            </div>


            <div class="col-md-3">
                <label for="txtNeedyMobileNumber" class="form-label">Mobile Number</label>
                <input type="text" class="form-control" id="txtNeedyMobileNumber" name="txtNeedyMobileNumber" value="54543452" required>
                <div class="valid-tooltip">
                    Looks good!
                </div>
            </div>

            <div class="col-md-3">
                <label for="txtNeedyContactTime" class="form-label">Contact Time</label>
                <input type="text" class="form-control" id="txtNeedyContactTime" name="txtNeedyContactTime" value="5:68" required>
                <div class="valid-tooltip">
                    Looks good!
                </div>
            </div>


            <div class="col-md-5 ">
                <label class="form-label" for="NeedyId">Upload Id</label>
                <input type="file" class="form-control" id="NeedyId" name="NeedyId" onchange="loadidFile(this);">
            </div>
            <div class="col-md-5 ">
                <label class="form-label" for="NeedyImg">Upload Image</label>
                <input type="file" class="form-control" id="NeedyImg" name="NeedyImg" onchange="loadimgFile(this);">
            </div>

            <div class="col-md-5">
                <img src="pics/no image.jpg" class="img-thumbnail" alt="..." id="idprev" width="100" height="100">
            </div>

            <div class="col-md-5">
                <img src="pics/no image.jpg" class="img-thumbnail" alt="..." id="imgprev" width="100" height="100">
            </div>


            <div class="col-md-10 d-flex gap-5 justify-content-center">
                <button class="btn btn-primary" type="submit" formaction="/Needyprofile">Save</button>
                <button class="btn btn-primary" type="submit" formaction="/Needy-profile-update">Update</button>
            </div>
        </form>

    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
        crossorigin="anonymous"></script>
</body>

</html>